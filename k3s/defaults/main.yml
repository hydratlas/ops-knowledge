---
# Installation method
k3s_install_method: "script"  # Options: script, binary

# k3s version (leave empty for latest)
k3s_version: ""

# Server or agent mode
k3s_server_or_agent: "server"  # Options: server, agent

# k3s server URL (required for agent mode)
k3s_server_url: ""

# k3s token (required for agent mode, auto-generated for server)
k3s_token: ""

# Additional k3s install options
k3s_install_options: ""

# k3s service name
k3s_service_name: "k3s"

# Enable k3s service
k3s_service_enabled: true

# Start k3s service
k3s_service_state: "started"

# k3s configuration directory
k3s_config_dir: "/etc/rancher/k3s"

# k3s configuration file
k3s_config_file: "{{ k3s_config_dir }}/config.yaml"

# k3s configuration
k3s_config:
  write-kubeconfig-mode: "0644"
  disable:
    - traefik
    - servicelb

# SELinux configuration (RHEL only)
k3s_selinux_enabled: true

# Firewall configuration
k3s_manage_firewall: true

# Firewall ports for server
k3s_server_firewall_ports:
  - port: 6443
    proto: tcp
    comment: "Kubernetes API Server"
  - port: 10250
    proto: tcp
    comment: "Kubelet metrics"
  - port: 10251
    proto: tcp
    comment: "kube-scheduler"
  - port: 10252
    proto: tcp
    comment: "kube-controller"
  - port: 8472
    proto: udp
    comment: "Flannel VXLAN"
  - port: 2379
    proto: tcp
    comment: "etcd client"
  - port: 2380
    proto: tcp
    comment: "etcd peer"

# Firewall ports for agent
k3s_agent_firewall_ports:
  - port: 10250
    proto: tcp
    comment: "Kubelet metrics"
  - port: 8472
    proto: udp
    comment: "Flannel VXLAN"

# Download URL
k3s_install_script_url: "https://get.k3s.io"

# Binary download URL base
k3s_binary_url_base: "https://github.com/k3s-io/k3s/releases"

# System requirements
k3s_required_packages:
  RedHat:
    - curl
    - iptables
  Debian:
    - curl
    - iptables

# k3s data directory
k3s_data_dir: "/var/lib/rancher/k3s"

# k3s log directory
k3s_log_dir: "/var/log/k3s"

# Create k3s user
k3s_create_user: false
k3s_user: "k3s"
k3s_group: "k3s"