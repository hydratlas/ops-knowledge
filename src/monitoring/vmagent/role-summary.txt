VictoriaMetricsのvmagentをシングルバイナリーとしてインストールし、systemd（Debian/RHEL）またはOpenRC（Alpine）でサービス管理するロールである。vmagentはPrometheus互換のメトリクス収集エージェントであり、スクレイプしたメトリクスをremote_writeプロトコルでVictoriaMetricsやPrometheus互換のTSDBに転送する。GitHub Releasesから指定バージョンのバイナリーをダウンロードし、専用のmonitoringユーザーで実行される。Prometheusスクレイプ設定ファイルとサービス定義をテンプレートから生成し、リモートライト先URL、HTTPリッスンアドレス、ディスクバッファ上限、HAクラスター名などを変数で制御できる。リモートライト先がダウンした際は指定したディスク容量まで未送信データをバッファリングし、データ損失を防ぐ。外部ラベルやrelabel設定にも対応し、柔軟なメトリクス収集環境を構築できる。
