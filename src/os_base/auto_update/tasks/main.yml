---
- name: Gather minimal facts for os_family detection
  ansible.builtin.setup:
    gather_subset:
      - "!all"
      - "!any"
      - distribution

- name: Include distro-specific auto-update tasks
  ansible.builtin.include_tasks: "{{ ansible_os_family | lower }}.yml"
  when: ansible_os_family in ["Debian", "RedHat", "Alpine"]
